import{b as L,K as N,P as C,c as I,r as u,R as t,a as p,C as G,d as P,w as D,e as T}from"./vendor.b298acd6.js";const M=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};M();var x="/assets/twitter-logo.63ba7c86.svg";const B="0.0.0",O="myepicproject",F=[{name:"startStuffOff",accounts:[{name:"baseAccount",isMut:!0,isSigner:!0},{name:"user",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addGif",accounts:[{name:"baseAccount",isMut:!0,isSigner:!1},{name:"user",isMut:!0,isSigner:!0}],args:[{name:"gifLink",type:"string"}]}],R=[{name:"BaseAccount",type:{kind:"struct",fields:[{name:"totalGifs",type:"u64"},{name:"gifList",type:{vec:{defined:"ItemStruct"}}}]}}],j=[{name:"ItemStruct",type:{kind:"struct",fields:[{name:"gifLink",type:"string"},{name:"userAddress",type:"publicKey"}]}}],W={address:"Ad2MnCGA9DRcqksEDuM34qKDoTSmRcv5JrZykNEvGLjj"};var d={version:B,name:O,instructions:F,accounts:R,types:j,metadata:W};const _={publicKey:{"0":82,"1":66,"2":230,"3":171,"4":192,"5":205,"6":71,"7":254,"8":193,"9":248,"10":106,"11":227,"12":36,"13":203,"14":160,"15":102,"16":253,"17":242,"18":147,"19":191,"20":242,"21":246,"22":33,"23":190,"24":165,"25":186,"26":107,"27":23,"28":30,"29":209,"30":66,"31":130},secretKey:{"0":163,"1":193,"2":165,"3":101,"4":117,"5":48,"6":190,"7":121,"8":210,"9":15,"10":165,"11":228,"12":106,"13":217,"14":2,"15":93,"16":119,"17":213,"18":140,"19":54,"20":250,"21":94,"22":104,"23":46,"24":90,"25":131,"26":220,"27":127,"28":41,"29":224,"30":59,"31":18,"32":82,"33":66,"34":230,"35":171,"36":192,"37":205,"38":71,"39":254,"40":193,"41":248,"42":106,"43":227,"44":36,"45":203,"46":160,"47":102,"48":253,"49":242,"50":147,"51":191,"52":242,"53":246,"54":33,"55":190,"56":165,"57":186,"58":107,"59":23,"60":30,"61":209,"62":66,"63":130}};var $={_keypair:_};globalThis.Buffer=L.Buffer;const w="@cloak777",q=`https://twitter.com/${w}`,{SystemProgram:U,Keypair:Z}=D,V=Object.values($._keypair.secretKey),z=new Uint8Array(V),m=N.fromSecretKey(z),y=new C(d.metadata.address),H=I("devnet"),v={preflightCommitment:"processed"},J=()=>{const[c,a]=u.exports.useState(""),[s,i]=u.exports.useState(null),[n,o]=u.exports.useState([]),l=async()=>{try{const{solana:e}=window;if(e){if(e.isPhantom){console.log("Phantom is found");const r=await e.connect({onlyIfTrusted:!0});console.log("Connected with Public Key:",r.publicKey.toString()),i(r.publicKey.toString())}}else alert("solana object not found. Connect phantom wallet")}catch(e){console.log(e)}},h=async()=>{const{solana:e}=window;if(e){const r=await e.connect();console.log("connected with publicn key",r.publicKey.toString()),i(r.publicKey.toString())}},E=async()=>{if(c.length===0){console.log("no gif link YUCK");return}console.log("Gif link:",c);try{const e=f();await new p(d,y,e).rpc.addGif(c,{accounts:{baseAccount:m.publicKey,user:e.wallet.publicKey}}),console.log("gif successfully sent ",c),await g()}catch(e){console.log(e,"this was the error in sending GIF")}},k=e=>{const{value:r}=e.target;a(r)},f=()=>{const e=new G(H,v.preflightCommitment);return new P(e,window.solana,v.preflightCommitment)},S=async()=>{try{const e=f(),r=new p(d,y,e);console.log("ping"),await r.rpc.startStuffOff({accounts:{baseAccount:m.publicKey,user:e.wallet.publicKey,systemProgram:U.programId},signers:[m]}),console.log("Created a new BaseAccount w/ address:",m.publicKey.toString()),await g()}catch(e){console.log("Error creating BaseAccount account:",e)}},A=()=>t.createElement("button",{className:"cta-button connect-wallet-button",onClick:h},"Connect to Wallet"),K=()=>n===null?t.createElement("div",{className:"connected-container"},t.createElement("button",{className:"cta-button submit-gif-button",onClick:S},"Do One-Time Initialization For GIF Program Account")):t.createElement("div",{className:"connected-container"},t.createElement("form",{onSubmit:e=>{e.preventDefault(),E()}},t.createElement("input",{className:"input-link",type:"text",placeholder:"Enter gif link!",value:c,onChange:k}),t.createElement("button",{type:"submit",className:"cta-button submit-gif-button"},"Submit")),t.createElement("div",{className:"gif-grid"},n.map((e,r)=>t.createElement("div",{className:"gif-item-card"},t.createElement("div",{className:"gif-item",key:r},t.createElement("img",{src:e.gifLink}),t.createElement("a",{href:e.gifLink}," ",e.gifLink," "),t.createElement("span",null," ",t.createElement("h5",null,"Posted By: ",e.userAddress.toString())," ")))))),g=async()=>{try{const e=f(),b=await new p(d,y,e).account.baseAccount.fetch(m.publicKey);console.log("Got the account",b),o(b.gifList)}catch(e){console.log("Error in getGifList: ",e),o(null)}};return u.exports.useEffect(()=>{const e=async()=>{await l()};return window.addEventListener("load",e),()=>window.removeEventListener("load",e)},[]),u.exports.useEffect(()=>{s&&(console.log("Fetching GIF list..."),g())},[s]),t.createElement("div",{className:"App"},t.createElement("div",{className:s?"authed-container":"container"},t.createElement("div",{className:"header-container"},t.createElement("p",{className:"header"},"Daffy's Dragon Ball GIF Portal"),t.createElement("p",{className:"sub-text"},"\u2728 View your Dragon Ball GIF collection in the metaverse \u2728"),!s&&A(),s&&K()),t.createElement("div",{className:"footer-container"},t.createElement("img",{alt:"Twitter Logo",className:"twitter-logo",src:x}),t.createElement("a",{className:"footer-text",href:q,target:"_blank",rel:"noreferrer"},`built by ${w}`))))};T.render(t.createElement(t.StrictMode,null,t.createElement(J,null)),document.getElementById("root"));
